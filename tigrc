set vertical-split = no

# Key
# @ : Suppresses output
# sh : Pipes aren't supported without a subshell
# Note: Can't seem to escape double quotes, you can escape single quotes, but they behave unpredictably. Tig tokens (e.g., "%(file)") evaluate even in single quotes.

bind status T !@git difftool 
bind main T !@git difftool %(commit)^!

# Diff
# Below will work even if tig is opened from a subfolder, but it fails if the path has a space
# bind status D !@sh -c "git diff \'$(git rev-parse --show-toplevel)/%(file)\' | mate --async"
bind status D !@sh -c "git diff '%(file)' | mate --async"
bind status E !@sh -c "vim -g '%(file)'"

# Editing
bind status O !@open %(file)
bind status A !@atom %(file)

# Launchbar
# bind status L !sh -c "osascript -e 'tell application \"LaunchBar\" to open \"$(pwd)/%(file)\"'"

# Copying Hashes
bind generic <Esc>c !@sh -c "echo %(commit) | pbcopy"

# Vim
bind generic <Ctrl-B> move-page-up
bind generic <Ctrl-F> move-page-down

# Emacs
bind generic <Ctrl-V> move-page-down

# Debugging
# bind status Z !sh -c 'cat %(file)'
# bind status Z !sh -c "git diff \'$(git rev-parse --show-toplevel)/%(file)\'"
